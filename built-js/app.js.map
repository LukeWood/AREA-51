{"version":3,"sources":["js/date_handling.js","js/main.js","js/timeline.js","js/ufos.js","node_modules/auto-reload-brunch/vendor/auto-reload.js"],"names":["days_in_month","num_months","length","next_date","day","month","year","months","toTextDate","convertToDateString","date","parseInt","slice","substring","map","UFO_Map","document","ufo_data_promise","fetch","then","response","json","year_promise","Promise","all","start","data","map_to_percentage_basis","x","y","add_ufos_for_year","ufo_location","location","addUFOPercent","curry_update","ufo_data","years_available","curried_update","year_index","current_year","setTimeout","update_function","window","addEventListener","resize","timeline","getElementById","currentYear","ctx","getContext","redraw_timeline","percent_done","fillStyle","fillRect","width","height","set_date","innerHTML","container","scene","camera","renderer","WIDTH","innerWidth","HEIGHT","innerHeight","MAXWIDTH","MAXHEIGHT","cancelled","counter","ufo_geo1","THREE","TorusGeometry","ufo_geo2","SphereGeometry","ufo_material","MeshPhongMaterial","color","reflectivity","ufo_material2","diskGeo","CircleGeometry","diskMaterial","MeshBasicMaterial","transparent","opacity","speed","setSpeed","spd","init","Scene","initCamera","initRenderer","initMap","domElement","className","body","appendChild","style","cursor","addMouseHandler","call","render","aspect","updateProjectionMatrix","setSize","PerspectiveCamera","position","set","lookAt","WebGLRenderer","antialias","setClearColor","setPixelRatio","devicePixelRatio","loader","TextureLoader","texture","load","material","Mesh","CubeGeometry","light","DirectionalLight","castShadow","receiveShadow","add","addUFO","ufo","sub_ufo","name","toString","isUFO","loopWrapper","animateUFO","bind","addPoint","disk","clone","addPointPercent","callback","Math","floor","z","copy","tempJson","castBeam","castDown","fun","remove","fadeOut","resetStars","i","children","requestAnimationFrame","mouseDown","mouseX","mouseY","onMouseMove","e","preventDefault","deltaX","clientX","deltaY","clientY","rotateScene","moveScene","onMouseUp","evt","onMouseDown","touchX","touchY","touched","touched_first","setInterval","touchHandler","touches","rotation","destroy","parentNode","removeChild","WebSocket","MozWebSocket","br","brunch","ar","disabled","_ar","cacheBuster","url","round","Date","now","replace","indexOf","browser","navigator","userAgent","toLowerCase","forceRepaint","reloaders","page","reload","stylesheet","querySelectorAll","filter","link","val","getAttribute","href","forEach","offsetHeight","javascript","scripts","textScripts","script","text","srcScripts","src","loaded","onLoad","eval","newScript","createElement","async","onload","head","port","host","server","hostname","connect","connection","onmessage","event","message","reloader","onerror","readyState","close","onclose"],"mappings":"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","file":"built-js/app.js","sourcesContent":["const days_in_month = [31,28,31,30,31,30,31,31,30,31,30,31];\nconst num_months = days_in_month.length+1;\n\nfunction next_date(day, month, year) {\n  day++;\n  if(day > days_in_month[month-1]) {\n    month++;\n    day=1;\n  }\n  if(month > num_months) {\n    year++;\n    month=1;\n  }\n  return {day, month, year}\n}\n\nconst months = [\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"];\n\nfunction toTextDate(day, month, year) {\n  return `${months[month-1]} ${day}, ${year}`;\n}\n\n//19990101 -> January 1, 1999\nfunction convertToDateString(date){\n  let month = parseInt(date.slice(-4).substring(0,2))\n  let day = date.slice(-2);\n  let year = date.substring(0,4);\n  return toTextDate(day, month, year)\n}\n\nexport {next_date, convertToDateString, toTextDate}\n","import {convertToDateString} from './date_handling';\nimport {UFO_Map} from './ufos';\nimport {redraw_timeline, set_date} from './timeline';\n\n//the ufo map itself\nlet map = new UFO_Map(document);\n\nlet ufo_data_promise = fetch(\"combined/out.json\")\n  .then(response => response.json())\nlet year_promise = fetch(\"combined/years.json\")\n  .then(response => response.json())\n\nPromise.all([ufo_data_promise, year_promise])\n  .then(data => start(data[0], data[1]))\n\n// These are magic numbers that correctly map to the us border on the image I used lol\nfunction map_to_percentage_basis(x, y) {\n  y = y + 60.5\n  y/=(-145.68+60.5);\n  x-=26.45;\n  x/=60.55-28.5;\n  return {x: x, y: y}\n}\n\nfunction add_ufos_for_year(data) {\n  data.map((ufo_location) => {\n    let location = map_to_percentage_basis(ufo_location[2], ufo_location[3]);\n    if(location.x < 1 && location.x > 0 && location.y < 1 && location.y > 0){\n      map.addUFOPercent(location.x, location.y);\n    }\n  });\n}\n\nfunction curry_update(ufo_data, years_available) {\n  function curried_update(year_index) {\n    if(year_index > years_available.length) {return}\n    let current_year = years_available[year_index];\n    let data = ufo_data[current_year]\n    if(data) {\n      add_ufos_for_year(data);\n    }\n    set_date(current_year)\n    redraw_timeline(year_index/years_available.length);\n    setTimeout(() => curried_update(year_index+1), 500);\n  }\n  return curried_update;\n\n}\n\nfunction start(ufo_data, years_available) {\n  let update_function = curry_update(ufo_data, years_available);\n  update_function(0);\n}\n\nwindow.addEventListener(\"resize\", map.resize);\n","import {convertToDateString} from './date_handling'\n\nconst timeline = document.getElementById(\"timeline\");\nconst currentYear = document.getElementById(\"currentYear\");\nconst ctx = timeline.getContext(\"2d\");\n\nfunction redraw_timeline(percent_done){\n  ctx.fillStyle = \"#333333\";\n  ctx.fillRect(0,0,timeline.width,timeline.height);\n  ctx.fillStyle=\"#0000FF\";\n  ctx.fillRect(0,0,timeline.width*percent_done,timeline.height);\n}\n\nfunction set_date(date){\n  currentYear.innerHTML = convertToDateString(date)\n}\n\nexport {redraw_timeline, set_date}\n","\"use strict\";\n\n//Options still needs to be implemented.\nfunction UFO_Map(container){\n\n\t//scene elements, I wouldn't mess with these if you are trying to work with this\n\tvar scene, camera, renderer, map;\n\n\t//Size parameters.\n\tvar WIDTH = window.innerWidth,HEIGHT = window.innerHeight,MAXWIDTH = 928, MAXHEIGHT = 592;\n\n\tvar cancelled = false,counter = 0;\n\n\t//UFO Geometries\n\tvar ufo_geo1 = new THREE.TorusGeometry(17,3,40,50), ufo_geo2 = new THREE.SphereGeometry(14,32,32),ufo_material = new THREE.MeshPhongMaterial({color: 0xcccccc,reflectivity:.4}),ufo_material2 = new THREE.MeshPhongMaterial({color: 0xcccccc,reflectivity:.4});\n\n\t//These handle the discs that mark the sightings\n\tvar diskGeo = new THREE.CircleGeometry(7,40,40,40),diskMaterial = new THREE.MeshBasicMaterial({color: 0xff0000, transparent:true,opacity:1});\n\n\t//cant just use this.speed because of the calls to bind later on.\n\tvar speed = 30;\n\tthis.setSpeed = function(spd){speed = spd;};\n\n\t//SECTION INITIALIZATION\n\tfunction init(container) {\n\t\tscene = new THREE.Scene();\n\t\tinitCamera();\n\t\tif(!window.renderer)\n\t\t\tinitRenderer();\n\t\trenderer = window.renderer;\n\t\tinitMap();\n\t\trenderer.domElement.className = \"grabbable\";\n\t\tcontainer.body.appendChild(renderer.domElement);\n\t\trenderer.domElement.style.cursor=\"grab\";\n\t\taddMouseHandler.call(renderer.domElement);\n\t\trender();\n\t}\n\n\t//fires whenever the window resizes to keep the map accurate\n\tfunction resize(){\n\t\tWIDTH  = window.innerWidth;\n\t\tHEIGHT = window.innerHeight\n\t\tcamera.aspect = WIDTH/HEIGHT;\n\t\tcamera.updateProjectionMatrix();\n\t\trenderer.setSize(WIDTH, HEIGHT);\n\t}\n\n\tfunction initCamera() {\n\t\tcamera = new THREE.PerspectiveCamera(70, WIDTH / HEIGHT, 1, 4000);\n\t\tcamera.position.set(0,-200,600);\n\t\tcamera.lookAt(scene.position);\n\t}\n\n\t//Prevents excessive WebGLRenderer instances\n\tfunction initRenderer() {\n\n\t\trenderer = new THREE.WebGLRenderer({ antialias: true });\n\t\trenderer.setClearColor(0x000000);\n\t\trenderer.setPixelRatio( window.devicePixelRatio );\n\n\t\trenderer.setSize(WIDTH, HEIGHT);\n\t\twindow.renderer = renderer;\n\t}\n\n\tfunction initMap() {\n\t\tvar loader = new THREE.TextureLoader();\n\n\t\tvar texture = loader.load(\"img/usa.jpg\");\n\t\tvar material = new THREE.MeshPhongMaterial({map:texture});\n\n\t\tmap = new THREE.Mesh(new THREE.CubeGeometry(MAXWIDTH,MAXHEIGHT, 2), material);\n\t\tvar light = new THREE.DirectionalLight( 0xffffff );\n\t\tlight.position.set( 1000, 1000, 1000);\n\t\tlight.castShadow = true;\n\t\tmap.receiveShadow = true;\n\t\tscene.add(light);\n\t\tscene.add(map);\n\t}\n\t// END INITIALIZATION\n\n\tfunction addUFO(x,y){\n\t\tif(cancelled){\n\t\t\treturn;\n\t\t}\n\t\tcounter++;\n\t\tvar ufo = new THREE.Mesh(ufo_geo1,ufo_material);\n\t\tvar sub_ufo = new THREE.Mesh(ufo_geo2,ufo_material2);\n\t\tufo.add(sub_ufo);\n\t\tufo.castShadow = true;\n\t\tufo.receiveShadow = true;\n\t\tufo.name = counter.toString();\n\t\tufo.isUFO = true;\n\t\tmap.add(ufo);\n\t\tufo.position.set(-928/2 +x,592/2 -y,400);\n\t\tloopWrapper(animateUFO.bind(ufo));\n\t}\n\t//Adds a ufo at a certain percentage of the way across the screen\n\tfunction addUFOPercent(x,y){\n\t\taddUFO(x*MAXWIDTH, y*MAXHEIGHT);\n\t}\n\n\tfunction addPoint(x,y){\n\t\tvar disk = new THREE.Mesh(diskGeo,diskMaterial.clone());\n\t\tdisk.material.opacity=.1;\n\t\tmap.add(disk);\n\t\tdisk.position.set(-928/2 +x,592/2 -y,3);\n\t}\n\tfunction addPointPercent(x,y){\n\t\taddPoint(x*MAXWIDTH, y*MAXHEIGHT);\n\t}\n\n\n\t//loops for animation until the function returns false.\n\tfunction loopWrapper(callback){\n\t\tif(cancelled){\n\t\t\treturn;\n\t\t}\n\t\tif(callback()){\n\t\t\tsetTimeout(function(){loopWrapper(callback);},Math.floor(20*((150-(speed))/150)));\n\t\t}\n\t}\n\n\t//transitions a ufo in.\n\tfunction animateUFO(){\n\t\tthis.position.z-=3;\n\n\t\tif(this.position.z<=130){\n\t\t\t\tvar disk = new THREE.Mesh(diskGeo,diskMaterial.clone());\n\t\t\t\tdisk.position.copy(this.position);\n\n\t\t\t\tmap.add(disk);\n\t\t\t\tvar tempJson = {\n\t\t\t\t\t\tdisk:disk,\n\t\t\t\t\t\tufo:this,\n\t\t\t\t\t\tcounter:1000\n\t\t\t\t};\n\n\t\t\t\tloopWrapper(castBeam.bind(tempJson));\n\t\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\t//casts stars onto the map.\n\tfunction castBeam(){\n\t\tthis.counter++;\n\t\tif(this.counter > 5){\n\t\t\tvar disk = new THREE.Mesh(diskGeo,diskMaterial);\n\t\t\tdisk.position.copy(this.ufo.position);\n\t\t\tmap.add(disk);\n\t\t\tloopWrapper(castDown.bind(disk));\n\t\t\tthis.counter = 0;\n\t\t}\n\n\t\tthis.disk.position.z-=2;\n\t\tif(this.disk.position.z <= 3){\n\t\t\tvar fun = remove.bind(this.ufo);\n\t\t\tsetTimeout(function(){loopWrapper(fun);},Math.floor(200*(150-speed)/150));\n\t\t\tloopWrapper(fadeOut.bind(this.disk));\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\tfunction castDown(){\n\t\tthis.position.z-=2;\n\t\tif(this.position.z <=3){\n\t\t\tmap.remove(this);\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\tfunction fadeOut(){\n\t\tif(this.material.opacity <= .1){\n\t\t//map.remove(this);\n\t\t\treturn false;\n\t\t}\n\t\telse{\n\t\t\tthis.material.opacity-=.001;\n\t\t}\n\t\treturn true;\n\t}\n\n\t//fly away and remove.\n\tfunction remove(){\n\t\tthis.position.z+=5;\n\t\tif(this.position.z >=700){\n\t\t\tmap.remove(this);\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\t//This removes all children.\n\tfunction resetStars(){\n\t\tcancelled = true;\n\t\tfor(var i = map.children.length; i >= 0; i--){\n\t\t\tmap.remove(map.children[i])\n\t\t}\n\t\tsetTimeout(function(){cancelled = false;},Math.floor(40*((150-(speed))/150)));\n\n\t}\n\n\tfunction render(){\n\t\trenderer.render(scene, camera);\n\t\trequestAnimationFrame(render);\n\t}\n\n\t//Mouse handlers\n\t//This section handles mouse events for rotation.  I kept the variables down here so that they are easier to keep track of.\n\t//This is all a closure, so these functions aren't available outside which is good.\n\tfunction addMouseHandler() {\n\n\t\tvar mouseDown = false,mouseX,mouseY;\n\t\tfunction onMouseMove(e) {\n\t\t\te.preventDefault();\n\n\t\t\tvar deltaX = e.clientX - mouseX, deltaY = e.clientY - mouseY;\n\t\t\tmouseX = e.clientX;\n\t\t\tmouseY = e.clientY;\n\n\t\t\tif (mouseDown) {\n\t\t\t\trotateScene(deltaX);\n\t\t\t\tmoveScene(deltaY);\n\t\t\t}\n\t\t}\n\n\t\tfunction onMouseUp(evt) {\n\t\t\tevt.preventDefault();\n\t\t\tmouseDown = false;\n\t\t}\n\n\t\tfunction onMouseDown(evt){\n\t\t\tevt.preventDefault();\n\t\t\tmouseDown = true;\n\t\t}\n\n\t\t//Touch variables\n\t\tvar touchX, touchY, touched = false,touched_first = false;\n\n\t\tthis.addEventListener(\"touchstart\", function(e){\n\t\t\tif(!touched_first){\n\t\t\t\tsetInterval(touchHandler,20);\n\t\t\t\ttouched_first = true;\n\t\t\t}\n\t\t\ttouched = true;\n\t\t\ttouchX= e.touches[0].clientX;\n\t\t\ttouchY = e.touches[0].clientY;\n\t\t\te.preventDefault();\n\t\t}, true);\n\n\t\tthis.addEventListener(\"touchmove\",function(e){\n\t\t\ttouchX= e.touches[0].clientX;\n\t\t\ttouchY = e.touches[0].clientY;\n\t\t\te.preventDefault();\n\t\t});\n\n\t\tthis.addEventListener(\"touchend\", function(e){\n\t\t\ttouched = false;\n\t\t\te.preventDefault();\n\t\t}, true);\n\n\t\tfunction touchHandler(){\n\t\t\tif(touched){\n\t\t\t\trotateScene(5 * (touchX - (WIDTH/2))/(WIDTH/2));\n\t\t\t\tmoveScene(-5 * (touchY - HEIGHT/2)/(HEIGHT/2));\n\t\t\t}\n\t\t}\n\n\t\tthis.addEventListener('mousemove',onMouseMove,false);\n\t\tthis.addEventListener('mousedown', onMouseDown,false);\n\t\tthis.addEventListener('mouseup', onMouseUp,false);\n\n\t}\n\n\t//This is outside of addMouseHandler because I want these to be publicly available for people to add custom controls if they so desire.\n\tfunction rotateScene(deltaX){\n\t\t\tmap.rotation.z-= deltaX/100;\n\t}\n\tfunction moveScene(deltaY) {\n\t\tif((camera.position.z > 300 || deltaY > 0) && (camera.position.z < 700 || deltaY < 0)){\n\t\t\tcamera.position.z += deltaY;\n\t\t\tcamera.position.y += deltaY*1.5;\n\t\t\tcamera.rotation.x-=deltaY/360;\n\t\t}\n\t}\n\n\n\t\t//Call init and define public functions.\n\tinit(container);\n\tmoveScene(-50);\n\tthis.addUFO = addUFO.bind(this);\n\tthis.addUFOPercent = addUFOPercent.bind(this);\n\tthis.addPoint = addPoint.bind(this);\n\tthis.addPointPercent = addPointPercent.bind(this);\n\tthis.resize = resize.bind(this);\n\tthis.resetStars = resetStars.bind(this);\n\tthis.rotateScene = rotateScene.bind(this);\n\tthis.moveScene = moveScene.bind(this);\n\tthis.destroy = function(){renderer.domElement.parentNode.removeChild(renderer.domElement);}\n}\n\nexport {UFO_Map}\n","/* jshint ignore:start */\n(function() {\n  var WebSocket = window.WebSocket || window.MozWebSocket;\n  var br = window.brunch = (window.brunch || {});\n  var ar = br['auto-reload'] = (br['auto-reload'] || {});\n  if (!WebSocket || ar.disabled) return;\n  if (window._ar) return;\n  window._ar = true;\n\n  var cacheBuster = function(url){\n    var date = Math.round(Date.now() / 1000).toString();\n    url = url.replace(/(\\&|\\\\?)cacheBuster=\\d*/, '');\n    return url + (url.indexOf('?') >= 0 ? '&' : '?') +'cacheBuster=' + date;\n  };\n\n  var browser = navigator.userAgent.toLowerCase();\n  var forceRepaint = ar.forceRepaint || browser.indexOf('chrome') > -1;\n\n  var reloaders = {\n    page: function(){\n      window.location.reload(true);\n    },\n\n    stylesheet: function(){\n      [].slice\n        .call(document.querySelectorAll('link[rel=stylesheet]'))\n        .filter(function(link) {\n          var val = link.getAttribute('data-autoreload');\n          return link.href && val != 'false';\n        })\n        .forEach(function(link) {\n          link.href = cacheBuster(link.href);\n        });\n\n      // Hack to force page repaint after 25ms.\n      if (forceRepaint) setTimeout(function() { document.body.offsetHeight; }, 25);\n    },\n\n    javascript: function(){\n      var scripts = [].slice.call(document.querySelectorAll('script'));\n      var textScripts = scripts.map(function(script) { return script.text }).filter(function(text) { return text.length > 0 });\n      var srcScripts = scripts.filter(function(script) { return script.src });\n\n      var loaded = 0;\n      var all = srcScripts.length;\n      var onLoad = function() {\n        loaded = loaded + 1;\n        if (loaded === all) {\n          textScripts.forEach(function(script) { eval(script); });\n        }\n      }\n\n      srcScripts\n        .forEach(function(script) {\n          var src = script.src;\n          script.remove();\n          var newScript = document.createElement('script');\n          newScript.src = cacheBuster(src);\n          newScript.async = true;\n          newScript.onload = onLoad;\n          document.head.appendChild(newScript);\n        });\n    }\n  };\n  var port = ar.port || 9485;\n  var host = br.server || window.location.hostname || 'localhost';\n\n  var connect = function(){\n    var connection = new WebSocket('ws://' + host + ':' + port);\n    connection.onmessage = function(event){\n      if (ar.disabled) return;\n      var message = event.data;\n      var reloader = reloaders[message] || reloaders.page;\n      reloader();\n    };\n    connection.onerror = function(){\n      if (connection.readyState) connection.close();\n    };\n    connection.onclose = function(){\n      window.setTimeout(connect, 1000);\n    };\n  };\n  connect();\n})();\n/* jshint ignore:end */\n"]}